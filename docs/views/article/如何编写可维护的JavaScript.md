---
title: 如何编写可维护的Javascript
date: 2021-1-4
---
:::tip
当你开始工作时，你不是在给你自己写代码，而是为后来人写的。 —— Nichloas C. Zakas
:::
<!-- more -->

## 基本的格式化

首行缩进使用一个TAB（四个空格），单行字符长度限制为80个字符。

当一行长度达到了最大字符数限制时，需在运算符后换行，下一行缩进两个TAB（八个空格）。

当给变量赋值时，第二行的位置应当和赋值运算符的位置保持对齐。

语句应以运算符结尾，语句结束应使用分号。

当一段代码的语义和另一段不相关时，应使用空行分隔。

## 命名规则

变量名命名使用小驼峰式（由小写字母开始，后续每个单词首字母大写）。

变量名的前缀应当是名词，用以将变量和函数区分；函数的前缀应当是动词。

构造函数的命名通常是名词，并且遵照大驼峰式（所有字母首字母大写）。

常量应所有字母首字母大写，使用下划线来分隔。

## null值的使用

### 建议的用法

用来初始化一个变量，这个变量可能赋值为一个对象。

用来和一个已经初始化的变量比较，这个变量可以是也可以不是一个对象。

当函数的参数期望是对象时，用作参数传入。

当函数的返回值期望是对象时，用作返回值传出。

### 不建议的用法

不要使用null来检测是否传入了某个参数。

不要用null来检测一个未初始化的变量。

## 使用对象直接量创建对象

```javascript
var book = {
    title: 'Maintainable Javascript',
    author: 'Nicholas C. Zakas',
};
```

## 使用数组直接量创建数组
```javascript
var colors = [ 'red', 'green', 'blue' ];
var numbers = [ 1, 2, 3, 4 ];
```

## 注释的使用

### 单行注释的使用

单行注释独占一行，用来解释下一行代码。这行注释之前总有一个空行，且缩进层级和下一行代码保持一致。

在一行代码尾部注释时，代码结束到注释之间至少一个TAB。如果超过单行最大字符限制，应将这条注释置于当前代码行上方。

单行注释不应以连续多行的形式出现，除非你需要注释一大段代码。

### 多行注释的使用

多行注释总会出现在将要描述的代码段之前，注释和代码之间没有空行。

多行注释之前应当有一个空行，且缩进层级和其描述的代码保持一致。

## 添加注释的一般原则

在需要让代码变得更清晰时添加注释。

难于理解的代码通常应当添加注释。

可能被误认为错误的代码应当添加注释。

考虑到兼容性的地方应当添加注释。
