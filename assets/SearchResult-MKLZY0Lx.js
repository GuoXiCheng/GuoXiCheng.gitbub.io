import{u as _,f as $,g as ee,h as L,i as te,j as le,t as ae,k as re,l as S,m as R,n as se,p as O,q as l,s as I,v as U,R as K,x as ne,y as oe,z as ie,A as Ee,O as ue,P as ce,B as he,C as de,D as Be,E as me,F as pe,G as Ae,H as ve,I as T}from"./app-CggRJqOU.js";const ge=["/","/algorithm/","/algorithm/sort.html","/article/Android%20Compose%20%E5%88%87%E6%8D%A2%E5%BA%94%E7%94%A8%E4%B8%BB%E9%A2%98.html","/article/","/article/sftp%20%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html","/article/%E5%88%B6%E4%BD%9Cnpm%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93.html","/article/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html","/article/%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81.html","/cloud-native/","/design-pattern/","/develop/","/en/","/knowledge/%E5%92%8C___.html","/knowledge/GET%E5%92%8CPOST.html","/knowledge/HTTP%E5%92%8CHTTPS.html","/knowledge/JS%E6%95%B0%E5%AD%97%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98.html","/knowledge/","/knowledge/apply%E3%80%81call%E3%80%81bind.html","/knowledge/arguments%E5%AF%B9%E8%B1%A1.html","/knowledge/px%E3%80%81em%E3%80%81rem%E3%80%81vh%E3%80%81vw.html","/knowledge/state%E5%92%8Cprops.html","/knowledge/this%E5%AF%B9%E8%B1%A1.html","/knowledge/typeof%E5%92%8Cinstanceof.html","/knowledge/var%E3%80%81let%E3%80%81const.html","/knowledge/%E4%BB%80%E4%B9%88%E6%98%AFJavaScript.html","/knowledge/%E4%BD%9C%E7%94%A8%E5%9F%9F.html","/knowledge/%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96.html","/knowledge/%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0.html","/knowledge/%E5%93%88%E5%B8%8C%E8%B7%AF%E7%94%B1%E5%92%8CHistory%E8%B7%AF%E7%94%B1.html","/knowledge/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D.html","/knowledge/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0.html","/knowledge/%E9%97%AD%E5%8C%85.html","/projects/","/reading/","/algorithm/sort/","/algorithm/sort/selection-sort.html","/cloud-native/argocd/","/cloud-native/argocd/argocd.html","/cloud-native/docker/","/cloud-native/docker/docker-init.html","/cloud-native/kubernetes/","/cloud-native/kubernetes/k8s-release-strategy.html","/cloud-native/kubernetes/sealed-secrets-client-side.html","/design-pattern/behavioral/","/design-pattern/behavioral/chain-of-responsibility.html","/design-pattern/behavioral/command.html","/design-pattern/behavioral/iterator.html","/design-pattern/behavioral/mediator.html","/design-pattern/behavioral/memento.html","/design-pattern/behavioral/observer.html","/design-pattern/behavioral/state.html","/design-pattern/behavioral/strategy.html","/design-pattern/behavioral/template-method.html","/design-pattern/behavioral/visitor.html","/design-pattern/creational/","/design-pattern/creational/abstract-factory.html","/design-pattern/creational/builder.html","/design-pattern/creational/factory-method.html","/design-pattern/creational/prototype.html","/design-pattern/creational/singleton.html","/design-pattern/structural/","/design-pattern/structural/adapter.html","/design-pattern/structural/bridge.html","/design-pattern/structural/composite.html","/design-pattern/structural/decorator.html","/design-pattern/structural/facade.html","/design-pattern/structural/flyweight.html","/design-pattern/structural/proxy.html","/develop/android/ADB%E6%97%A0%E7%BA%BF%E8%B0%83%E8%AF%95.html","/develop/android/","/develop/angular/","/develop/angular/karma%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE.html","/develop/angular/%E5%A4%9A%E5%9B%BD%E8%AF%AD%E7%B3%BB%E8%AE%BE%E7%BD%AE.html","/develop/angular/%E6%8E%A5%E5%85%A5Azure-AD%E7%99%BB%E5%BD%95.html","/develop/angular/%E7%BB%84%E4%BB%B6%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE.html","/develop/git/Git%E5%88%9D%E5%A7%8B%E5%8C%96.html","/develop/git/Git%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html","/develop/git/Git%E6%A0%87%E7%AD%BE.html","/develop/git/","/develop/html/","/develop/html/classical-layout.html","/develop/html/flex-layout.html","/develop/html/grid-layout.html","/develop/python/","/develop/react/","/develop/react/state%E7%9A%84%E7%94%A8%E6%B3%95.html","/develop/test/","/develop/test/test-coverage-example.html","/develop/typescript/","/develop/typescript/TS%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0.html","/develop/typescript/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A3%85%E9%A5%B0%E5%99%A8.html","/en/algorithm/","/en/algorithm/sort.html","/en/projects/","/projects/SKIP-Docs/","/projects/SKIP-Docs/contribute.html","/projects/SKIP-Docs/how-to-use.html","/projects/SKIP-Docs/xiaomi.html","/projects/TinyCRUD-Docs/","/projects/TinyCRUD-Docs/contribution-guide.html","/projects/TinyCRUD-Docs/create-request.html","/projects/TinyCRUD-Docs/start-using.html","/reading/2022/%E4%BA%BA%E6%80%A7%E7%9A%84%E5%BC%B1%E7%82%B9.html","/reading/2022/%E9%9D%9E%E6%9A%B4%E5%8A%9B%E6%B2%9F%E9%80%9A.html","/reading/2023/001-%E8%87%AA%E6%8E%A7%E5%8A%9B.html","/reading/2023/002-%E4%BA%86%E4%B8%8D%E8%B5%B7%E7%9A%84%E7%9B%96%E8%8C%A8%E6%AF%94.html","/reading/2023/003-%E4%BA%B2%E5%AF%86%E5%85%B3%E7%B3%BB.html","/reading/2023/004-%E8%A2%AB%E8%AE%A8%E5%8E%8C%E7%9A%84%E5%8B%87%E6%B0%94.html","/reading/2023/005-%E9%AD%94%E9%AC%BC%E8%81%8A%E5%A4%A9%E6%9C%AF.html","/reading/2023/006-%E7%B2%BE%E7%9B%8A%E5%88%9B%E4%B8%9A%E5%AE%9E%E6%88%98.html","/reading/2023/007-%E5%B0%8F%E5%B2%9B%E7%BB%8F%E6%B5%8E%E5%AD%A6.html","/reading/2023/008-%E5%BE%AE%E4%B9%A0%E6%83%AF%E7%98%A6%E8%BA%AB%E7%AF%87.html","/reading/2023/009-%E5%86%85%E5%90%91%E8%80%85%E6%B2%9F%E9%80%9A%E5%9C%A3%E7%BB%8F.html","/reading/2023/010-%E5%B0%8F%E7%8E%8B%E5%AD%90.html","/reading/2023/011-%E6%B4%9B%E5%85%8B%E8%8F%B2%E5%8B%92%E5%AE%B6%E4%B9%A6.html","/reading/2023/012-%E5%AF%8C%E5%85%B0%E5%85%8B%E6%9E%97%E8%87%AA%E4%BC%A0.html","/reading/2023/013-%E7%A7%98%E5%AF%86.html","/reading/2023/014-%E7%A8%BB%E7%9B%9B%E5%92%8C%E5%A4%AB%E8%AF%AD%E5%BD%95100%E6%9D%A1.html","/reading/2023/015-%E5%A8%B1%E4%B9%90%E8%87%B3%E6%AD%BB.html","/reading/2023/016-%E6%88%91%E5%9C%A8100%E5%A4%A9%E5%86%85%E8%87%AA%E5%AD%A6%E8%8B%B1%E8%AF%AD%E7%BF%BB%E8%BD%AC%E4%BA%BA%E7%94%9F.html","/reading/2023/017-%E5%9C%A3%E7%BB%8F%E7%9A%84%E6%99%BA%E6%85%A7.html","/reading/2023/018-%E6%AC%B2%E6%9C%9B%E4%B8%8E%E5%B0%8A%E4%B8%A5.html","/reading/2023/019-%E4%B9%A1%E5%9C%9F%E4%B8%AD%E5%9B%BD.html","/reading/2023/021-%E4%B8%8A%E7%98%BE.html","/reading/2023/022-%E4%BC%98%E7%A7%80%E7%9A%84%E7%BB%B5%E7%BE%8A.html","/en/algorithm/sort/","/en/algorithm/sort/selection-sort.html","/en/projects/SKIP-Docs/","/en/projects/SKIP-Docs/contribute.html","/en/projects/SKIP-Docs/how-to-use.html","/en/projects/SKIP-Docs/xiaomi.html","/en/projects/TinyCRUD-Docs/","/en/projects/TinyCRUD-Docs/contribution-guide.html","/en/projects/TinyCRUD-Docs/create-request.html","/en/projects/TinyCRUD-Docs/start-using.html","/404.html","/reading/2022/","/reading/2023/"],ye="SEARCH_PRO_QUERY_HISTORY",d=_(ye,[]),De=()=>{const{queryHistoryCount:a}=T,r=a>0;return{enabled:r,queryHistory:d,addQueryHistory:s=>{r&&(d.value.length<a?d.value=Array.from(new Set([s,...d.value])):d.value=Array.from(new Set([s,...d.value.slice(0,a-1)])))},removeQueryHistory:s=>{d.value=[...d.value.slice(0,s),...d.value.slice(s+1)]}}},x=a=>ge[a.id]+("anchor"in a?`#${a.anchor}`:""),Ce="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:H}=T,B=_(Ce,[]),ke=()=>{const a=H>0;return{enabled:a,resultHistory:B,addResultHistory:r=>{if(a){const s={link:x(r),display:r.display};"header"in r&&(s.header=r.header),B.value.length<H?B.value=[s,...B.value]:B.value=[s,...B.value.slice(0,H-1)]}},removeResultHistory:r=>{B.value=[...B.value.slice(0,r),...B.value.slice(r+1)]}}},Fe=a=>{const r=ue(),s=L(),{search:C,terminate:c}=ce(),p=S(!1),A=he([]);return de(()=>{const m=()=>{A.value=[],p.value=!1},k=ve(v=>{p.value=!0,v?C({type:"search",query:v,locale:s.value,options:r.value}).then(h=>{A.value=h,p.value=!1}).catch(h=>{console.error(h),m()}):m()},T.searchDelay);O([a,s],()=>k(a.value),{immediate:!0}),Be(()=>{c()})}),{searching:p,results:A}};var we=$({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:r}){const s=ee(),C=L(),c=te(le),{enabled:p,addQueryHistory:A,queryHistory:m,removeQueryHistory:k}=De(),{enabled:v,resultHistory:h,addResultHistory:j,removeResultHistory:G}=ke(),Q=p||v,F=ae(a,"query"),{results:g,searching:z}=Fe(F),n=re({isQuery:!0,index:0}),E=S(0),u=S(0),P=R(()=>Q&&(m.value.length>0||h.value.length>0)),f=R(()=>g.value.length>0),w=R(()=>g.value[E.value]||null),J=()=>{const{isQuery:e,index:t}=n;t===0?(n.isQuery=!e,n.index=e?h.value.length-1:m.value.length-1):n.index=t-1},M=()=>{const{isQuery:e,index:t}=n;t===(e?m.value.length-1:h.value.length-1)?(n.isQuery=!e,n.index=0):n.index=t+1},Y=()=>{E.value=E.value>0?E.value-1:g.value.length-1,u.value=w.value.contents.length-1},V=()=>{E.value=E.value<g.value.length-1?E.value+1:0,u.value=0},N=()=>{u.value<w.value.contents.length-1?u.value+=1:V()},W=()=>{u.value>0?u.value-=1:Y()},b=e=>e.map(t=>me(t)?t:l(t[0],t[1])),X=e=>{if(e.type==="customField"){const t=pe[e.index]||"$content",[o,D=""]=Ae(t)?t[C.value].split("$content"):t.split("$content");return e.display.map(i=>l("div",b([o,...i,D])))}return e.display.map(t=>l("div",b(t)))},y=()=>{E.value=0,u.value=0,r("updateQuery",""),r("close")};return se("keydown",e=>{if(a.isFocusing){if(f.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=w.value.contents[u.value];A(a.query),j(t),s.push(x(t)),y()}}else if(v){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")M();else if(e.key==="Enter"){const{index:t}=n;n.isQuery?(r("updateQuery",m.value[t]),e.preventDefault()):(s.push(h.value[t].link),y())}}}}),O([E,u],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:F.value?!f.value:!P.value}],id:"search-pro-results"},F.value===""?Q?P.value?[p?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},c.value.queryHistory),m.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:n.isQuery&&n.index===t}],onClick:()=>{r("updateQuery",e)}},[l(I,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:U,onClick:o=>{o.preventDefault(),o.stopPropagation(),k(t)}})]))])):null,v?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},c.value.resultHistory),h.value.map((e,t)=>l(K,{to:e.link,class:["search-pro-result-item",{active:!n.isQuery&&n.index===t}],onClick:()=>{y()}},()=>[l(I,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(o=>b(o)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:U,onClick:o=>{o.preventDefault(),o.stopPropagation(),G(t)}})]))])):null]:c.value.emptyHistory:c.value.emptyResult:z.value?l(ne,{hint:c.value.searching}):f.value?l("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:t},o)=>{const D=E.value===o;return l("li",{class:["search-pro-result-list-item",{active:D}]},[l("div",{class:"search-pro-result-title"},e||c.value.defaultTitle),t.map((i,Z)=>{const q=D&&u.value===Z;return l(K,{to:x(i),class:["search-pro-result-item",{active:q,"aria-selected":q}],onClick:()=>{A(a.query),j(i),y()}},()=>[i.type==="text"?null:l(i.type==="title"?oe:i.type==="heading"?ie:Ee,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[i.type==="text"&&i.header?l("div",{class:"content-header"},i.header):null,l("div",X(i))])])})])})):c.value.emptyResult)}});export{we as default};
