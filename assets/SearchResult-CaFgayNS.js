import{u as _,f as $,g as ee,h as L,i as te,j as le,t as ae,k as re,l as S,m as R,n as se,p as O,q as l,s as I,v as U,R as K,x as ne,y as oe,z as ie,A as ce,O as ue,P as de,B as he,C as me,D as pe,E as ve,F as ge,G as Ee,H as ye,I as x}from"./app-B64h0T5y.js";const Be=["/","/js-full-stack.html","/algorithm/","/algorithm/sort.html","/article/","/article/android-compose-toggle-theme.html","/article/app-deployment-evolution.html","/article/cross-domain.html","/article/debounce-throttle.html","/article/history-of-javascript.html","/article/make-npm-lib.html","/article/sftp-usage.html","/cloud-native/","/design-pattern/","/develop/","/en/","/knowledge/%E5%92%8C___.html","/knowledge/GET%E5%92%8CPOST.html","/knowledge/HTTP%E5%92%8CHTTPS.html","/knowledge/JS%E6%95%B0%E5%AD%97%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98.html","/knowledge/","/knowledge/apply%E3%80%81call%E3%80%81bind.html","/knowledge/arguments%E5%AF%B9%E8%B1%A1.html","/knowledge/px%E3%80%81em%E3%80%81rem%E3%80%81vh%E3%80%81vw.html","/knowledge/state%E5%92%8Cprops.html","/knowledge/this%E5%AF%B9%E8%B1%A1.html","/knowledge/typeof%E5%92%8Cinstanceof.html","/knowledge/var%E3%80%81let%E3%80%81const.html","/knowledge/%E4%BB%80%E4%B9%88%E6%98%AFJavaScript.html","/knowledge/%E4%BD%9C%E7%94%A8%E5%9F%9F.html","/knowledge/%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96.html","/knowledge/%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0.html","/knowledge/%E5%93%88%E5%B8%8C%E8%B7%AF%E7%94%B1%E5%92%8CHistory%E8%B7%AF%E7%94%B1.html","/knowledge/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D.html","/knowledge/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0.html","/knowledge/%E9%97%AD%E5%8C%85.html","/projects/","/reading/","/software-engineering/","/algorithm/sort/","/algorithm/sort/selection-sort.html","/cloud-native/argocd/","/cloud-native/argocd/argocd.html","/cloud-native/docker/","/cloud-native/docker/docker-architecture.html","/cloud-native/docker/docker-image-build.html","/cloud-native/docker/docker-image-structure.html","/cloud-native/docker/docker-installation.html","/cloud-native/docker/docker-use.html","/cloud-native/kubernetes/","/cloud-native/kubernetes/k8s-release-strategy.html","/cloud-native/kubernetes/sealed-secrets-client-side.html","/design-pattern/behavioral/","/design-pattern/behavioral/chain-of-responsibility.html","/design-pattern/behavioral/command.html","/design-pattern/behavioral/iterator.html","/design-pattern/behavioral/mediator.html","/design-pattern/behavioral/memento.html","/design-pattern/behavioral/observer.html","/design-pattern/behavioral/state.html","/design-pattern/behavioral/strategy.html","/design-pattern/behavioral/template-method.html","/design-pattern/behavioral/visitor.html","/design-pattern/creational/","/design-pattern/creational/abstract-factory.html","/design-pattern/creational/builder.html","/design-pattern/creational/factory-method.html","/design-pattern/creational/prototype.html","/design-pattern/creational/singleton.html","/design-pattern/structural/","/design-pattern/structural/adapter.html","/design-pattern/structural/bridge.html","/design-pattern/structural/composite.html","/design-pattern/structural/decorator.html","/design-pattern/structural/facade.html","/design-pattern/structural/flyweight.html","/design-pattern/structural/proxy.html","/develop/android/","/develop/android/adb-wireless-debug.html","/develop/angular/","/develop/angular/angular-i18n.html","/develop/angular/azure-login.html","/develop/angular/components-share-data.html","/develop/angular/karma-config.html","/develop/database/","/develop/database/transaction-isolation-level.html","/develop/git/","/develop/git/git-installation.html","/develop/git/git-tag.html","/develop/git/git-use.html","/develop/html/","/develop/html/classical-layout.html","/develop/html/flex-layout.html","/develop/html/grid-layout.html","/develop/nestjs/","/develop/python/","/develop/react/","/develop/react/usage-of-state.html","/develop/test/","/develop/test/test-coverage-example.html","/develop/typescript/","/develop/typescript/custom-decorator.html","/develop/typescript/generic-function.html","/en/algorithm/","/en/algorithm/sort.html","/en/projects/","/projects/SKIP-Docs/","/projects/SKIP-Docs/contribute.html","/projects/SKIP-Docs/how-to-use.html","/projects/SKIP-Docs/xiaomi.html","/projects/TinyCRUD-Docs/","/projects/TinyCRUD-Docs/contribution-guide.html","/projects/TinyCRUD-Docs/create-request.html","/projects/TinyCRUD-Docs/start-using.html","/reading/2022/human-weakness.html","/reading/2022/nonviolent-communication.html","/reading/2023/001-self-control.html","/reading/2023/002-the-great-gatsby.html","/reading/2023/003-intimate-relationship.html","/reading/2023/004-the-courage-to-be-hated.html","/reading/2023/005-devilish-chatting-techniques.html","/reading/2023/006-%E7%B2%BE%E7%9B%8A%E5%88%9B%E4%B8%9A%E5%AE%9E%E6%88%98.html","/reading/2023/007-%E5%B0%8F%E5%B2%9B%E7%BB%8F%E6%B5%8E%E5%AD%A6.html","/reading/2023/008-%E5%BE%AE%E4%B9%A0%E6%83%AF%E7%98%A6%E8%BA%AB%E7%AF%87.html","/reading/2023/009-%E5%86%85%E5%90%91%E8%80%85%E6%B2%9F%E9%80%9A%E5%9C%A3%E7%BB%8F.html","/reading/2023/010-%E5%B0%8F%E7%8E%8B%E5%AD%90.html","/reading/2023/011-%E6%B4%9B%E5%85%8B%E8%8F%B2%E5%8B%92%E5%AE%B6%E4%B9%A6.html","/reading/2023/012-%E5%AF%8C%E5%85%B0%E5%85%8B%E6%9E%97%E8%87%AA%E4%BC%A0.html","/reading/2023/013-%E7%A7%98%E5%AF%86.html","/reading/2023/014-%E7%A8%BB%E7%9B%9B%E5%92%8C%E5%A4%AB%E8%AF%AD%E5%BD%95100%E6%9D%A1.html","/reading/2023/015-%E5%A8%B1%E4%B9%90%E8%87%B3%E6%AD%BB.html","/reading/2023/016-%E6%88%91%E5%9C%A8100%E5%A4%A9%E5%86%85%E8%87%AA%E5%AD%A6%E8%8B%B1%E8%AF%AD%E7%BF%BB%E8%BD%AC%E4%BA%BA%E7%94%9F.html","/reading/2023/017-%E5%9C%A3%E7%BB%8F%E7%9A%84%E6%99%BA%E6%85%A7.html","/reading/2023/018-%E6%AC%B2%E6%9C%9B%E4%B8%8E%E5%B0%8A%E4%B8%A5.html","/reading/2023/019-%E4%B9%A1%E5%9C%9F%E4%B8%AD%E5%9B%BD.html","/reading/2023/021-addicted.html","/reading/2023/022-excellent-sheep.html","/reading/2024/001-pyramid-principle.html","/software-engineering/twelve-factor/001-codebase.html","/software-engineering/twelve-factor/002-dependencies.html","/software-engineering/twelve-factor/003-config.html","/software-engineering/twelve-factor/004-backing-services.html","/software-engineering/twelve-factor/005-build-release-run.html","/software-engineering/twelve-factor/006-processes.html","/software-engineering/twelve-factor/007-port-binding.html","/software-engineering/twelve-factor/008-concurrency.html","/software-engineering/twelve-factor/009-disposability.html","/software-engineering/twelve-factor/010-dev-prod-parity.html","/software-engineering/twelve-factor/011-logs.html","/software-engineering/twelve-factor/012-admin-processes.html","/software-engineering/twelve-factor/","/en/algorithm/sort/","/en/algorithm/sort/selection-sort.html","/en/projects/SKIP-Docs/","/en/projects/SKIP-Docs/contribute.html","/en/projects/SKIP-Docs/how-to-use.html","/en/projects/SKIP-Docs/xiaomi.html","/en/projects/TinyCRUD-Docs/","/en/projects/TinyCRUD-Docs/contribution-guide.html","/en/projects/TinyCRUD-Docs/create-request.html","/en/projects/TinyCRUD-Docs/start-using.html","/404.html","/reading/2022/","/reading/2023/","/reading/2024/"],Ae="SEARCH_PRO_QUERY_HISTORY",m=_(Ae,[]),fe=()=>{const{queryHistoryCount:a}=x,r=a>0;return{enabled:r,queryHistory:m,addQueryHistory:s=>{r&&(m.value.length<a?m.value=Array.from(new Set([s,...m.value])):m.value=Array.from(new Set([s,...m.value.slice(0,a-1)])))},removeQueryHistory:s=>{m.value=[...m.value.slice(0,s),...m.value.slice(s+1)]}}},j=a=>Be[a.id]+("anchor"in a?`#${a.anchor}`:""),we="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:H}=x,p=_(we,[]),ke=()=>{const a=H>0;return{enabled:a,resultHistory:p,addResultHistory:r=>{if(a){const s={link:j(r),display:r.display};"header"in r&&(s.header=r.header),p.value.length<H?p.value=[s,...p.value]:p.value=[s,...p.value.slice(0,H-1)]}},removeResultHistory:r=>{p.value=[...p.value.slice(0,r),...p.value.slice(r+1)]}}},De=a=>{const r=ue(),s=L(),{search:w,terminate:d}=de(),g=S(!1),E=he([]);return me(()=>{const v=()=>{E.value=[],g.value=!1},k=ye(y=>{g.value=!0,y?w({type:"search",query:y,locale:s.value,options:r.value}).then(h=>{E.value=h,g.value=!1}).catch(h=>{console.error(h),v()}):v()},x.searchDelay);O([a,s],()=>k(a.value),{immediate:!0}),pe(()=>{d()})}),{searching:g,results:E}};var Ce=$({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:r}){const s=ee(),w=L(),d=te(le),{enabled:g,addQueryHistory:E,queryHistory:v,removeQueryHistory:k}=fe(),{enabled:y,resultHistory:h,addResultHistory:T,removeResultHistory:z}=ke(),Q=g||y,D=ae(a,"query"),{results:B,searching:G}=De(D),n=re({isQuery:!0,index:0}),c=S(0),u=S(0),P=R(()=>Q&&(v.value.length>0||h.value.length>0)),b=R(()=>B.value.length>0),C=R(()=>B.value[c.value]||null),J=()=>{const{isQuery:e,index:t}=n;t===0?(n.isQuery=!e,n.index=e?h.value.length-1:v.value.length-1):n.index=t-1},M=()=>{const{isQuery:e,index:t}=n;t===(e?v.value.length-1:h.value.length-1)?(n.isQuery=!e,n.index=0):n.index=t+1},Y=()=>{c.value=c.value>0?c.value-1:B.value.length-1,u.value=C.value.contents.length-1},V=()=>{c.value=c.value<B.value.length-1?c.value+1:0,u.value=0},N=()=>{u.value<C.value.contents.length-1?u.value+=1:V()},W=()=>{u.value>0?u.value-=1:Y()},F=e=>e.map(t=>ve(t)?t:l(t[0],t[1])),X=e=>{if(e.type==="customField"){const t=ge[e.index]||"$content",[o,f=""]=Ee(t)?t[w.value].split("$content"):t.split("$content");return e.display.map(i=>l("div",F([o,...i,f])))}return e.display.map(t=>l("div",F(t)))},A=()=>{c.value=0,u.value=0,r("updateQuery",""),r("close")};return se("keydown",e=>{if(a.isFocusing){if(b.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=C.value.contents[u.value];E(a.query),T(t),s.push(j(t)),A()}}else if(y){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")M();else if(e.key==="Enter"){const{index:t}=n;n.isQuery?(r("updateQuery",v.value[t]),e.preventDefault()):(s.push(h.value[t].link),A())}}}}),O([c,u],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:D.value?!b.value:!P.value}],id:"search-pro-results"},D.value===""?Q?P.value?[g?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},d.value.queryHistory),v.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:n.isQuery&&n.index===t}],onClick:()=>{r("updateQuery",e)}},[l(I,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:U,onClick:o=>{o.preventDefault(),o.stopPropagation(),k(t)}})]))])):null,y?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},d.value.resultHistory),h.value.map((e,t)=>l(K,{to:e.link,class:["search-pro-result-item",{active:!n.isQuery&&n.index===t}],onClick:()=>{A()}},()=>[l(I,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(o=>F(o)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:U,onClick:o=>{o.preventDefault(),o.stopPropagation(),z(t)}})]))])):null]:d.value.emptyHistory:d.value.emptyResult:G.value?l(ne,{hint:d.value.searching}):b.value?l("ul",{class:"search-pro-result-list"},B.value.map(({title:e,contents:t},o)=>{const f=c.value===o;return l("li",{class:["search-pro-result-list-item",{active:f}]},[l("div",{class:"search-pro-result-title"},e||d.value.defaultTitle),t.map((i,Z)=>{const q=f&&u.value===Z;return l(K,{to:j(i),class:["search-pro-result-item",{active:q,"aria-selected":q}],onClick:()=>{E(a.query),T(i),A()}},()=>[i.type==="text"?null:l(i.type==="title"?oe:i.type==="heading"?ie:ce,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[i.type==="text"&&i.header?l("div",{class:"content-header"},i.header):null,l("div",X(i))])])})])})):d.value.emptyResult)}});export{Ce as default};
