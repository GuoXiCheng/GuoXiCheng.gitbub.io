import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as i,c as p,b as e,d as a,e as c,a as n}from"./app-Bx_sDspg.js";const r={},o=n('<h1 id="sealed-secrets-client-side" tabindex="-1"><a class="header-anchor" href="#sealed-secrets-client-side"><span>Sealed Secrets - Client Side</span></a></h1><h2 id="管理k8s中的敏感信息" tabindex="-1"><a class="header-anchor" href="#管理k8s中的敏感信息"><span>管理k8s中的敏感信息</span></a></h2><p>在使用GitOps的持续交付模型中，我们使用Git仓库作为系统状态的唯一来源，但是像数据库密码、API密钥等敏感信息不适合直接存储在Git仓库中，因此我们需要一种更安全的方式来存储这些敏感信息。</p><p>Sealed Secrets的Client Side：<code>kubeseal</code> 使用非对称加密来加密只有控制器才能解密的敏感信息，经过加密的信息才可以安全地存储在Git仓库中。</p><h2 id="安装kubeseal" tabindex="-1"><a class="header-anchor" href="#安装kubeseal"><span>安装kubeseal</span></a></h2>',5),d={href:"https://github.com/bitnami-labs/sealed-secrets/releases",target:"_blank",rel:"noopener noreferrer"},u=n(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>以下演示使用的是Window系统，因此你可能需要下载darwin并解压后得到exe文件。</p></div><h2 id="添加环境变量" tabindex="-1"><a class="header-anchor" href="#添加环境变量"><span>添加环境变量</span></a></h2><p>将kubeseal所在的目录添加到环境变量中，以便在任何地方都可以使用kubeseal。</p><p>如果你不想添加环境变量，你需要确保在<code>kubeseal.exe</code>所在的目录下执行命令。</p><h2 id="加密敏感信息" tabindex="-1"><a class="header-anchor" href="#加密敏感信息"><span>加密敏感信息</span></a></h2><p>例如，你有这样一份<code>secret.yaml</code>文件，其中的敏感信息字段仅使用base64编码：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">password</span><span class="token punctuation">:</span> c2VjcmV0
  <span class="token key atrule">username</span><span class="token punctuation">:</span> YWRtaW4=
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Secret
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>secret<span class="token punctuation">-</span><span class="token number">2</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> mynamespace
<span class="token key atrule">type</span><span class="token punctuation">:</span> Opaque
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用<code>kubeseal</code>命令对<code>secret.yaml</code>文件进行加密：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>kubeseal <span class="token parameter variable">-o</span> yaml <span class="token operator">&lt;</span> secret.yaml <span class="token operator">&gt;</span> newsecret.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这条命令将读取当前目录下的<code>secret.yaml</code>文件，将加密后的信息写入<code>newsecret.yaml</code>文件中。</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> bitnami.com/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> SealedSecret
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token null important">null</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>secret<span class="token punctuation">-</span><span class="token number">2</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> mynamespace
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">encryptedData</span><span class="token punctuation">:</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> AgBd5pG60gKTMe5VVsnx1CzYwNQtF4lOfn9FTFSXF12Sg/AtYtEb75Jwk86c149iYblKwIMlTPrEtH3NPQoS7wc8bU5mV6UF2VPAVufrMJErtbneJXDebk2jEaznHUMVWj3WbnnV1zRRLwr9YcZvngC2I1bb9pZgZZuGrDnQiYd2qywriXDNDAb1eJceNVM2xCY3akD9OVO+gXfeF7Whu9LkysrR6gWiARV248JJ6qbqYodZ9zof1Fcv84JPMV/uLbkhdNzP8anC8pWIpvl7YJ7rf8IWZcLhqPwWLYBWn6gT9bZiRw7879DiwmLUrk+4QwlNFCr+uxTZ9SibrRVj/AhOAGSADlkeXkIowpqVWG1iFg4K7Z0ld8y5rndiCeWSyW6Ir7o3I+J/vRfAESBWBZSw86XeH2h9dYNTvoI6cw1aqxBKpHXORzo404SJr02VxOdWxSDBxkfgT9PZrFkJm6yrhXJ4emj1WXm1i2ucF9uFdk9eWEFvKkl8G9wbdFK1Edg3HWexSCPfQvJHjBjOAT27Y/DCDsWkWyGhl/BflwgIoRdQy4S2wW3o3QGmjsIfwZN3dVIgjqkpYLTmeQ1oQ1zkue7mWOJ6dZBBHu7Opg4SEtOa2SHNQ+E/u6AOQJg4ZIUIhgtzL/0Mg4KzqqbonJleu97zG0Ddwx2TDy9GdS8ARiYy6nkCAY/8rStlk8UZf9K65FZky9s=
    <span class="token key atrule">username</span><span class="token punctuation">:</span> AgCaA/r5WNC9BqmwzxF7Fj0Xj9rzh9sSnwr8huD6pDHWtMgi5X43r/gMSs6UZrl2k6BylBuYDf2fmgtvqYaThtvV9ozhvIfvIfbRiQtxel5p8+SGD8MWYR1ii2zFdkmGW4hewsQ5LL5ul3G60kQmUh6gWXqtyuAOXykIYioGkeiXQyq6I20DHPXDZyMk15tKMvyNCcYtp8rtAqla1+zNEXj/B46bsAciqCJyOvQmzhIILErJSyo1VIxUulEbZFVbxLIHWTrPruugI7YU6hYKXwerqc94S65+vpKThF9GkHtHF7vIjFuLNODv17zJ6VzNJsZCvbErefwnqWxo+DPmsYMitHyCTPWgi8BK1h2jrlJnoB+EgcIIpHYmop0cfgdOX29+ET39RGQ1KPUPu5ykRHs9cuaQc0WnO5VmpmSNaJ9pBANdtwicHaBGwnX2kicbJCiz/Kq9FHia62hdVh+5YgukxloIsUpxNMOHPqdSb180zia2YEDfS6qxLA6ebhrZQqjKoYY7umYQmF1fM/V4QadQDW26suYMVOrHyOReZ/1JwZQyOwiEU/3macJR8U5OhsWsOS8RzhMXfZdZ0p8ykESDtP1lV5VdPZAR5aZFIu0B2xmSTjLpCDdlgV0z/EvvmMu6YWm/QYB+7bXqCyWPXyqn/oH4QFSIsn0Lxfd74BbYuZcWj1FNUbyUFvpl+/CNEmu5y5ZX4w==
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token null important">null</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token null important">null</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>secret<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token key atrule">namespace</span><span class="token punctuation">:</span> mynamespace
    <span class="token key atrule">type</span><span class="token punctuation">:</span> Opaque
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用kubeseal加密后的内容是安全的，可以放心地提交到Git仓库中。</p>`,12);function k(m,b){const s=l("ExternalLinkIcon");return i(),p("div",null,[o,e("p",null,[a("下载安装kubeseal："),e("a",d,[a("kubeseal"),c(s)])]),u])}const y=t(r,[["render",k],["__file","sealed-secrets-client-side.html.vue"]]),S=JSON.parse(`{"path":"/cloud-native/kubernetes/sealed-secrets-client-side.html","title":"Sealed Secrets - Client Side","lang":"zh-CN","frontmatter":{"description":"Sealed Secrets - Client Side 管理k8s中的敏感信息 在使用GitOps的持续交付模型中，我们使用Git仓库作为系统状态的唯一来源，但是像数据库密码、API密钥等敏感信息不适合直接存储在Git仓库中，因此我们需要一种更安全的方式来存储这些敏感信息。 Sealed Secrets的Client Side：kubeseal 使用...","head":[["meta",{"property":"og:url","content":"https://guoxicheng.top/cloud-native/kubernetes/sealed-secrets-client-side.html"}],["meta",{"property":"og:site_name","content":"Guo's Page"}],["meta",{"property":"og:title","content":"Sealed Secrets - Client Side"}],["meta",{"property":"og:description","content":"Sealed Secrets - Client Side 管理k8s中的敏感信息 在使用GitOps的持续交付模型中，我们使用Git仓库作为系统状态的唯一来源，但是像数据库密码、API密钥等敏感信息不适合直接存储在Git仓库中，因此我们需要一种更安全的方式来存储这些敏感信息。 Sealed Secrets的Client Side：kubeseal 使用..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-28T06:10:01.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-28T06:10:01.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Sealed Secrets - Client Side\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-02-28T06:10:01.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"管理k8s中的敏感信息","slug":"管理k8s中的敏感信息","link":"#管理k8s中的敏感信息","children":[]},{"level":2,"title":"安装kubeseal","slug":"安装kubeseal","link":"#安装kubeseal","children":[]},{"level":2,"title":"添加环境变量","slug":"添加环境变量","link":"#添加环境变量","children":[]},{"level":2,"title":"加密敏感信息","slug":"加密敏感信息","link":"#加密敏感信息","children":[]}],"git":{"createdTime":1708932062000,"updatedTime":1709100601000},"readingTime":{"minutes":1.41,"words":422},"filePathRelative":"cloud-native/kubernetes/sealed-secrets-client-side.md","localizedDate":"2024年2月26日","autoDesc":true,"excerpt":"\\n<h2>管理k8s中的敏感信息</h2>\\n<p>在使用GitOps的持续交付模型中，我们使用Git仓库作为系统状态的唯一来源，但是像数据库密码、API密钥等敏感信息不适合直接存储在Git仓库中，因此我们需要一种更安全的方式来存储这些敏感信息。</p>\\n<p>Sealed Secrets的Client Side：<code>kubeseal</code> 使用非对称加密来加密只有控制器才能解密的敏感信息，经过加密的信息才可以安全地存储在Git仓库中。</p>\\n<h2>安装kubeseal</h2>\\n<p>下载安装kubeseal：<a href=\\"https://github.com/bitnami-labs/sealed-secrets/releases\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">kubeseal</a></p>"}`);export{y as comp,S as data};
